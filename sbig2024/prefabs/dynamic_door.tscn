[gd_scene load_steps=4 format=3 uid="uid://c77yvk1jsoi7h"]

[ext_resource type="Script" path="res://scripts/dynamic_door.gd" id="1_3hwqg"]
[ext_resource type="PackedScene" uid="uid://dg2ywt0a4ti7n" path="res://models/apt_door/apt_door.glb" id="1_xjht4"]
[ext_resource type="AudioStream" uid="uid://dvn2cnf6cqqx1" path="res://sounds/random_door_noise.tres" id="3_r06sg"]

[node name="dynamic_door" type="Node3D"]
script = ExtResource("1_3hwqg")

[node name="HingeJoint3D" type="HingeJoint3D" parent="."]
node_a = NodePath("../door_anchor")
node_b = NodePath("../door_dynamic/Node/door")
angular_limit/enable = true
angular_limit/upper = 0.0
angular_limit/lower = 0.0
angular_limit/bias = 0.99

[node name="door_anchor" type="StaticBody3D" parent="."]
collision_layer = 0
collision_mask = 0

[node name="door_dynamic" parent="." instance=ExtResource("1_xjht4")]

[node name="CollisionShape3D" parent="door_dynamic/Node/door" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.05, 0.8)

[node name="DoorNoisePlayer" type="AudioStreamPlayer3D" parent="door_dynamic/Node/door" index="2"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
stream = ExtResource("3_r06sg")
bus = &"SFX"

[connection signal="body_entered" from="door_dynamic/Node/door" to="." method="_on_door_body_entered"]

[editable path="door_dynamic"]
